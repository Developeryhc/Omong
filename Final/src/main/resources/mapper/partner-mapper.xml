<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="partner">
  <select id="selectOnePartner" parameterType="u" resultType="u">
  	select
  		partner_no as no,
  		partner_yn as yn,
  		partner_id as id,
  		partner_pw as pw,
  		partner_name as name,
  		partner_business as business,
  		partner_ceo as ceo,
  		partner_email as email,
  		partner_phone phone,
  		partner_tel as tel,
  		partner_address as address,
  		change_pw as changePw,
  		detail_address as detail_address,
  		'p' as type
	from partner where partner_id=#{id}
		<if test="pw != null">
		and partner_pw=#{pw}
		</if>  		
  </select>
  <insert id="insertPartner" parameterType="u">
  	insert into partner values(partner_sequence.nextval,0,#{id},#{pw},#{name},#{business},#{ceo},#{email},#{phone},#{tel},#{address},'n',#{detailAddress}) 		
  </insert>
  <insert id="packageInsert" parameterType="pac">
  	insert into packageproduct values(
  		#{partnerNo},
  		packageproduct_sequence.nextval,
  		#{packageProductName},
  		#{packageProductInfo},
  		'aaa',
  		#{packageProductSubPicture},
  		#{packageProductSubInfo1},
  		#{packageProductSubInfo2},
  		#{packageProductSubInfo3},
  		#{packageProductSubInfo4},
  		#{packageProductSubInfo5},
  		#{ceo},
  		#{tel},
  		#{homepage},
  		#{address}  		  		
  	)
  </insert>
  <select id="selectPacNo" resultType="int">
  	select max(packageproduct_no) from packageproduct 
  </select>
  <insert id="productInsert" parameterType="pro">
  	insert into product values(
  		#{packageProductNo},
  		product_sequence.nextval,
  		#{productName}
  	)  	
  </insert>
  <select id="selectProNo" resultType="int">
  	select max(product_no) from product  
  </select>
  <insert id="optionInsert">
  	insert into product_option values(
  		#{productNo},
  		option_sequence.nextval,
  		#{optionName},
  		#{optionPrice}
  	)
  	
  	
  	
  
  </insert>
</mapper>
