<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="plan">
  <insert id="insertPlan" parameterType="plan">
  	<selectKey keyProperty="planNo" resultType="int" order="AFTER">
  		SELECT MAX(plan_no) FROM plan
  	</selectKey>
  	INSERT INTO plan VALUES(plan_sequence.NEXTVAL, #{planPublic}, #{planWriter}, #{planTitle}, #{planStart}, #{planEnd}, #{planContent}, 0, 0, 0)
  </insert>
  <insert id="insertDay" parameterType="day">
  	INSERT INTO day VALUES(day_sequence.NEXTVAL, #{dayPlan}, TO_DATE(#{dayDate}, 'YYYY-MM-DD')+#{next}, #{dayLatitude}, #{dayLongitude}, #{dayTitle}, #{dayAddress})
  </insert>
  <select id="selectOneDay" resultType="int">
  	SELECT COUNT(*) AS amount FROM day WHERE day_plan = #{dayPlan}
  </select>
  <delete id="deleteDay">
  	DELETE FROM day WHERE day_plan = #{dayPlan}
  </delete>
</mapper>
